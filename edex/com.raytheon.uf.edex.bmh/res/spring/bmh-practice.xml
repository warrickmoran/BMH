<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
  http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

    <bean id="practiceManager" class="com.raytheon.uf.edex.bmh.practice.PracticeManager" />

  <camelContext id="bmhPracticeManagerContext" xmlns="http://camel.apache.org/schema/spring"
    errorHandlerRef="errorHandler">

    <route id="bmhPracticeManagerRoute">
      <from uri="jms-generic:topic:BMH.Practice.Config" />
      <doTry>
          <bean ref="serializationUtil" method="transformFromThrift" />
          <filter>
              <simple>${body} is "com.raytheon.uf.common.bmh.notify.config.PracticeModeConfigNotification"</simple>
              <bean ref="practiceManager" method="handleNotification" />
          </filter>
        <doCatch>
          <exception>java.lang.Throwable</exception>
          <to uri="log:bmh?level=ERROR" />
        </doCatch>
      </doTry>
    </route>

  </camelContext>
  
</beans>
